<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" />


  <title>Cat Facts</title>
</head>

<body>
  <section class="container text-center">
    <h1 class='text-primary'>Hello world cat facts</h1>

    <div class="cats grid"></div>

    <div class="wrapper">
      <h3>Enter text you want to see a Cat Return</h3>
      <input id='catInput' type="text">
      <button id='cat-submit-button' class="btn btn-primary">Submit request</button>
    </div>
  </section>

  <script>
    const container = document.querySelector('.cats')
    const submitButton = document.querySelector('#cat-submit-button')
    const catInput = document.querySelector('#catInput')


    function displayCats(cats) {
      container.innerHTML = '';

      cats.forEach(cat => {
        const img = document.createElement('img');
        img.src = cat.url;
        img.alt = `Cat ${cat.id}`;
        img.width = 200;
        img.style.objectFit = 'cover';
        img.style.margin = '8px';
        container.appendChild(img);
      });
    }

    async function getCatImages(numberOfCatsNeeded) {
      try {
        const response = await fetch(`https://api.thecatapi.com/v1/images/search?limit=10`);
        const json = await response.json();

        return json;

      } catch (e) {
        console.error(e)
      }
    }
    async function getCatWithText(text = '') {
      try {
        const response = await fetch(`https://cataas.com/cat/says/${text}`);
        window.open(response.url, '_blank');
      } catch (e) {
        console.error(e)
      }

    }

    getCatImages().then(cats => displayCats(cats));

    submitButton.addEventListener('click', () => {
      if (!catInput.value) return;
      getCatWithText(catInput.value)
    })
  </script>
</body>

</html>
